<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="daedan.mes.haccp.project.pre_rec_mgmt.P0190">

    <select id="selectFinalCheckList" parameterType="map" resultType="camelMap">
        /* [회수 관리 - 인증원으로 보낼 체크 리스트 가져오기] pre_rec_mgmt.p0190.selectFinalCheckList */
        SELECT
            #{lcnsNo} AS LCNS_NO
             ,#{companyNm} AS COMPANY_NM
             ,DATE_FORMAT(SRPL.CREATE_DT, '%Y-%m-%d') AS CREATE_DATE
             ,DATE_FORMAT(SRPL.CREATE_DT, '%Y%m%d') AS CREATE_DATE_FOR_FILE
             ,DATE_FORMAT(SRPL.CREATE_DT, '%H:%i:%s') AS CREATE_TIME
             ,L_CODE AS REC_CODE
             ,(SELECT L_CODE_NM FROM SHC_REC_MAIN B WHERE B.L_CODE = SRPL.L_CODE) AS REC_NM
             ,(SELECT ORG_FILE_NM FROM SHC_COMM_FILES WHERE FILE_KEY = SRPC.FILE_KEY) AS ORG_FILE_NM
             ,SRPC.SEQ AS SEQ
             ,SRPL.RMK
        FROM SHC_REC_PRE_LIST SRPL
                 LEFT JOIN SHC_REC_PRE_COMM SRPC
                           ON SRPL.REC_NO = SRPC.REC_NO
        WHERE SRPL.REC_NO = #{recNo}
    </select>
</mapper>
